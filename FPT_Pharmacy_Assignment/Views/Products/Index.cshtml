@model FPT_Pharmacy_Assignment.Models.ProductViewModel

@{
	ViewData["Title"] = "Products";
}

<!-- Include Bootstrap CSS -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

<div class="section properties">
	<div class="container">
		<div class="d-flex justify-content-between">
			<ul class="list-group properties-filter d-inline border-0">
				@foreach (var category in Model.Categories)
				{
					<li class="list-group-item d-inline border-0">
						<a href="@Url.Action("ProductByCategory", "Products", new { categoryId = category.CategoryId })">@category.Name</a>
					</li>
				}
			</ul>
			<form asp-action="SearchByName" asp-controller="Products" method="get" class="form-inline d-inline">
				<div class="input-group">
					<input asp-for="searchByName" class="form-control" placeholder="Search by name" />
					<div class="input-group-append">
						<button type="submit" class="btn btn-primary"><i class="fas fa-search"></i></button>
					</div>
				</div>
			</form>
		</div>
		<div class="row properties-box">
			<!-- Assuming you want to display products -->
			@foreach (var product in Model.Products)
			{
				<div class="col-lg-4 col-md-6 align-self-center mb-30 properties-items col-md-6">
					<div class="item">
						<a href="@Url.Action("Details", new { id = product.ProductId })">
							<img src="/uploads/products/@Html.DisplayFor(modelItem => product.ImageFile)"
								 class="card-img-top" alt="@Html.DisplayFor(modelItem => product.Name)">
						</a>
						<span class="category">@Html.DisplayFor(modelItem => product.Category.Name)</span>
						<h6>@product.Price</h6>
						<h4>@Html.DisplayFor(modelItem => product.Name)</h4>
						<ul>
							<li>Quantity: <span>@Html.DisplayFor(modelItem => product.StockLevel)</span></li>
						</ul>
						<div class="main-button">
							<a href="@Url.Action("Details", new { id = product.ProductId })">Details</a>
						</div>
					</div>
				</div>
			}
		</div>
	</div>

	<!-- Pagination -->
	<div class="row">
		<div class="col-lg-12">
			<ul class="pagination">
				@for (int i = 1; i <= ViewBag.TotalPages; i++)
				{
					<li class="@(i == ViewBag.CurrentPage ? "active" : "")">
						<a href="@Url.Action("Index", new { page = i, pageSize = ViewBag.PageSize })">@i</a>
					</li>
				}
				<li class="@(ViewBag.CurrentPage == ViewBag.TotalPages ? "disabled" : "")">
					<a href="@Url.Action("Index", new { page = ViewBag.CurrentPage + 1, pageSize = ViewBag.PageSize })">>></a>
				</li>
			</ul>
		</div>
	</div>
</div>

@section scripts {
	<script src="~/js/site.js"></script>
}
